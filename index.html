<html>
    <head>
        <link rel="stylesheet" href="index.css">
    </head>
    <body>
        <div class="navbar">
            <div class="dropdown">
                <div class="dropbtn">Frozen Food</div>
                <!-- Main Dropdown-->
                <div class="dropdown-one">
                    <div class="dItem" id="file" onclick="getProduct(1002)">Hamburger Patties</div>
                    <div id="link1" class="dItem">
                        Fish Fingers
                        <!--Inside Dropdown-->
                        <div class="dropdown-two">
                             <div class="dItem" id="file" onclick="getProduct(1000)">500 gram</div>
                             <div class="dItem" id="file" onclick="getProduct(1001)">1000 gram</div>
                        </div>
                    </div>
                    <div class="dItem" id="file" onclick="getProduct(1003)">Shelled Prawns</div>
                    <div id="link1" class="dItem">
                        Tub Ice Cream
                        <!--Inside Dropdown-->
                        <div class="dropdown-two">
                             <div class="dItem" id="file" onclick="getProduct(1004)">1 Litre</div>
                             <div class="dItem" id="file" onclick="getProduct(1005)">2 Litre</div>
                        </div>
                    </div>                    
                </div>
            </div> 
            
            <div class="dropdown">
                <div class="dropbtn">Fresh Food</div>
                <!-- Main Dropdown-->
                <div class="dropdown-one">
                    <div id="link1" class="dItem" onclick="getProduct(3002)">T'Bone Steak</div>
                    <div id="link1" class="dItem">Cheddar Cheese
                        <div class="dropdown-two">
                             <div class="dItem" id="file" onclick="getProduct(3000)">500 gram</div>
                             <div class="dItem" id="file" onclick="getProduct(3001)">1000 gram</div>
                        </div>
                    </div>
                    <div id="link1" class="dItem" onclick="getProduct(3003)">Navel Oranges</div>
                    <div id="link1" class="dItem" onclick="getProduct(3004)">Bananas</div>
                    <div id="link1" class="dItem" onclick="getProduct(3006)">Grapes</div>
                    <div id="link1" class="dItem" onclick="getProduct(3007)">Apple</div>
                    <div id="link1" class="dItem" onclick="getProduct(3005)">Peaches</div>
                </div>
            </div> 
            
            <div class="dropdown">
                <div class="dropbtn">Beverages</div>
                <!-- Main Dropdown-->
                <div class="dropdown-one">
                    <div id="link1" class="dItem">Coffee
                        <div class="dropdown-two">
                             <div class="dItem" id="file" onclick="getProduct(4003)">200 gram</div>
                             <div class="dItem" id="file" onclick="getProduct(4004)">500 gram</div>
                        </div>
                    </div>
                    <div id="link1" class="dItem">Earl Grey Tea Bags
                        <div class="dropdown-two">
                             <div class="dItem" id="file" onclick="getProduct(4000)">Pack 25</div>
                             <div class="dItem" id="file" onclick="getProduct(4001)">Pack 100</div>
                             <div class="dItem" id="file" onclick="getProduct(4002)">Pack 200</div>
                        </div>
                    </div>
                    <div id="link1" class="dItem" onclick="getProduct(4005)">Chocolate Bar</div>
                </div>
            </div> 
            
            <div class="dropdown">
                <div class="dropbtn">Home Health</div>
                <!-- Main Dropdown-->
                <div class="dropdown-one">
                    <div id="link1" class="dItem" onclick="getProduct(2002)">Bath Soap</div>
                    <div id="link1" class="dItem">Panadol
                        <div class="dropdown-two">
                             <div class="dItem" id="file" onclick="getProduct(2000)">Pack 24</div>
                             <div class="dItem" id="file" onclick="getProduct(2001)">Bottle 50</div>
                        </div>
                    </div>
                    <div id="link1" class="dItem" onclick="getProduct(2005)">Washing Powder</div>
                    <div id="link1" class="dItem">Garbage Bags
                        <div class="dropdown-two">
                             <div class="dItem" id="file" onclick="getProduct(2003)">Small (10 Pack)</div>
                             <div class="dItem" id="file" onclick="getProduct(2004)">Large (50 Pack)</div>
                        </div>
                    </div>
                    <div id="link1" class="dItem" onclick="getProduct(2006)">Laundry Bleach</div>
                </div>
            </div>
            
            <div class="dropdown">
                <div class="dropbtn">Pet Food</div>
                <!-- Main Dropdown-->
                <div class="dropdown-one">
                    <div id="link1" class="dItem" onclick="getProduct(5002)">Bird Food</div>
                    <div id="link1" class="dItem" onclick="getProduct(5003)">Cat Food</div>
                    <div id="link1" class="dItem">Dry Dog Food
                        <div class="dropdown-two">
                             <div class="dItem" id="file" onclick="getProduct(5000)">1 kg pack</div>
                             <div class="dItem" id="file" onclick="getProduct(5001)">5 kg pack</div>
                        </div>
                    </div>
                    <div id="link1" class="dItem" onclick="getProduct(5004)">Fish Food</div>
                </div>
            </div>
            <div id="top-right-frame">
                <div id="product_details"></div>
                <button onclick="addCart()">Add</button>
            </div>
            <div id="bottom-right-frame">
                <h1>Shopping Cart</h1>
                <div id="shopping-cart"></div>
                <button onClick="clearAllCart()">Clear All</button>
                <button onCLick="checkout()">Checkout</button>
            </div>
        </div>
        <script>
            var currentProduct;
            var totalCart = [];

            function getProduct(code){
              currentProduct = code;
              let xhttp = new XMLHttpRequest();
              xhttp.onreadystatechange = function() {
                if (xhttp.readyState == 4 && xhttp.status == 200) {
            	 	document.getElementById("product_details").innerHTML = xhttp.responseText
                }
              };
              xhttp.open("GET", "getProduct.php?code=" + code, true);
              xhttp.send();
            }
            
            function addCart(){
                document.getElementById("shopping-cart").innerHTML += document.getElementById("product_details").innerHTML
                document.getElementById("shopping-cart").innerHTML += "<button onCLick='clearItemCart(currentProduct)'>Clear</button>"
                totalCart.push(currentProduct)
            }
            
            // TODO
            function clearItemCart(code){
                document.getElementById("")
            }
            
            function clearAllCart(){
                document.getElementById("shopping-cart").innerHTML = "";
            }
            
            function checkout(){
              let xhttp = new XMLHttpRequest();
              xhttp.onreadystatechange = function() {
                if (xhttp.readyState == 4 && xhttp.status == 200) {
            // 	 	document.getElementById("product_details").innerHTML = xhttp.responseText
                }
              };
              xhttp.open("POST", "checkProduct.php");
              xhttp.setRequestHeader( "Content-Type", "application/json" );
              xhttp.send(totalCart);
            }
        </script>
    </body>
</html>